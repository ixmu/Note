家庭宽带配置

### 目标

获取光猫的管理员用户密码

设置桥接模式

不适用超级密码改桥（前提是知道宽带账号和密码，改桥会丢失这些信息）

http://192.168.1.1/bridge_route.gch

支持使用ipv6

### 思路

1、网线直连光猫

2、开启telnet

3、使用telnet登录光猫系统内部获取配置文件

4、解密配置文件

### 开启telnet

访问：[http://192.168.1.1/usr=CMCCAdmin&psw=aDm8H%25MdA&cmd=1&telnet.gch](http://192.168.1.1/usr=CMCCAdmin&psw=aDm8H%MdA&cmd=1&telnet.gch)

勾选启动Telnet点击确认

### 登录并解密配置

登录路由器

```
telnet 192.168.1.1 23
# 输入用户名密码，本设备为
# 用户名： admin
# 密码： aDm8H%MdA
```

进入配置目录，并查看目录

```
cd /userconfig/cfg/
ls
```

tftp传输配置文件到电脑

```
tftp -l db_backup_cfg.xml -p 192.168.1.5
# 192.168.1.5 根据本地电脑ip替换
```

### 总结

```
sidbg 1 DB decry /userconfig/cfg/db_user_cfg.xml
解密后文件在
/tmp/debug-decry-cfg
```


\#列出所有表

```
sidbg 1 DB p all
```

\#查看 TELNET 信息

```
sidbg 1 DB p TelnetCfg
```

\#查看 查看用户 信息

```
sidbg 1 DB p DevAuthInfo
```

修改管理员超级账号为 CMCCAdmin (可自定义)

```
sidbg 1 DB set DevAuthInfo 0 User CMCCAdmin
```

修改管理员超级账号的密码 aDm8H%MdA (可自定义)

```
sidbg 1 DB set DevAuthInfo 0 Pass aDm8H%MdA
```

修改配置 永久 开启 TELNET
\#开启TELNET

```
sidbg 1 DB set TelnetCfg 0 TS_Enable 1
```

\#开放TELNET LAN端口

```
sidbg 1 DB set TelnetCfg 0 Lan_Enable 1
```


\#关闭TELNET

```
sidbg 1 DB set TelnetCfg 0 TS_Enable 0
```

\#关闭TELNET LAN端口

```
sidbg 1 DB set TelnetCfg 0 Lan_Enable 0
```




\#修改TELNET账号  改为 root (可自定义)

```
sidbg 1 DB set TelnetUser 0 Username root
```

\#修改TELNET密码 改为 admin (可自定义)

```
sidbg 1 DB set TelnetUser 0 Password admin
```




\#修改TELNET账号 改为 root (可自定义)

```
sidbg 1 DB set TelnetUser 1 Username root
```

\#修改TELNET密码 改为 admin (可自定义)

```
sidbg 1 DB set TelnetUser 1 Password admin
```




\#记得最好保存下配置

```
sidbg 1 DB save
```

把CMCC- 去掉可以去掉WIFI强制的前缀

```
sidbg 1 DB WLANCfg 0 ESSIDPrefix CMCC-
```

